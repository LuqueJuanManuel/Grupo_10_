<!DOCTYPE html>
<html lang="en">
<!-- Head -->
<%- include("../partials/head")%>
<body>
<!-- Header -->
<%- include("../partials/header")%>
<main>
    <main id="products" class="container d-flex justify-content-between align-items-center">
        <!-- Acordeon -->
        <section class="row">
        <div class="accordion" id="accordionExample">
          <div class="accordion-item p-2">
            <h2 class="accordion-header" id="headingOne">
              <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                <p class="filtrarPorCategoria">
                  Filtrar por categorias
                </p>
                </button>
            </h2>
            <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
              <div class="accordion-body">
                <ul>
                  <li><a href="/products">Todos los productos</a></li>
                  <li><a href="">Notebook</a></li>
                  <li><a href="">Computadoras</a></li>
                  <li><a href="">Componentes de PC</a></li>
                  <li><a href="">Monitores</a></li>
                  <li><a href="">Consolas</a></li>
                </ul>
              </div>
            </div>
          </div>
        </div>
    
        <!-- Card -->
    
         <% if (results.length != 0) {%>
        <% results.forEach(product => { %>
          <div class="col-12  col-md-6 col-lg-4 p-3">
            <div class="card">
            <img src="/images/products/<%= product.images[0].name %>" class="card-img-top" alt="imagen del producto">
            <div class="card-body">
              <% if (product.name.length > 19) { %> 
              <h5><%= product.name.slice(0,19) %>...</h5> <% } else{ %>
              <h5 class="card-title"><%= product.name %></h5>
              <% } %>
              <div class="precio-descuento">
                <p class="card-text">$<%= toThousand(product.price) %></p>
                <% if (product.discount > 0) { %>
                <p class="card-text discount"><%= product.discount %>% off</p>
                <% } %>
              </div>
              <a href="/products/productDetail/<%= product.id %>" class="btn btn-primary">Ver detalles</a>
            </div>
            </div>
          </div>
        <% }) %>
        <% } else { %>
            <div class="col-12">
                <h2 class="error-msg" style="color: tomato;">No hay productos que coincidan con esa b√∫squeda</h2>
              </div>
            <% } %>
        </section>
      </main>
</main>
<!-- Footer -->
<%- include("../partials/footer")%> 

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js" integrity="sha384-mQ93GR66B00ZXjt0YO5KlohRA5SY2XofN4zfuZxLkoj1gXtW8ANNCe9d5Y3eG5eD" crossorigin="anonymous"></script>    
</body>
</html>